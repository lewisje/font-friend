/*!
 * Soma FontFriend 3.1
 * http://somadesign.ca/projects/fontfriend
 * 
 * Copyright (c) 2009-11 Matt Wiebe 
 * Licensed under the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Uses some code (c) 2009-10 Ryan Seddon from
 * http://labs.thecssninja.com/font_dragr/
 * Licensed under the MIT license
 *
*/
(function(A,f){var r,m,x,n="undefined",y={version:"3.1",css:"#font-friend{overflow:hidden;position:fixed;bottom:0;left:30px;background-color:#fff;background-color:rgba(255,255,255,0.93);width:740px;color:#222;-webkit-box-shadow:1px 1px 5px rgba(0,0,0,.3);-moz-box-shadow:1px 1px 5px rgba(0,0,0,.3);box-shadow:1px 1px 5px rgba(0,0,0,.3);z-index:10000;text-align:left;height:310px}#font-friend,#ff-drop h6,#ff-drop li{line-height:1.5!important}#ff-drop{padding:12px 12px 12px 36px}#ff-toggle{background-color:#222;color:#eee;display:block;width:12px;height:16px;padding:0 1px 0 3px;position:absolute;top:0;left:0;font-size:16px;line-height:1!important;cursor:pointer;z-index:10001;-moz-transition:.25s all ease-in-out;-webkit-transition:.25s all ease-in-out;-o-transition:.25s all ease-in-out;transition:.25s all ease-in-out}#ff-toggle sup{font-size:13px;line-height:1!important;vertical-align:super;display:none}.open #ff-toggle sup{display:inline}#ff-toggle:hover{color:#fff;background-color:#555}.open #ff-toggle{width:auto;height:32px;font-size:32px;padding:0 3px}#ff-drop form{background:0;color:inherit;float:none}#ff-drop h6{font-size:13px;border-bottom:1px solid #aaa;margin:0 0 6px!important;padding:0!important;text-indent:0!important;float:none!important;height:1.5em!important;white-space:nowrap}#ff-drop>div{float:left;width:120px;padding-right:20px;margin:0!important;position:relative}#ff-drop>div.wrap>div{margin-bottom:12px;font-size:11px!important;position:relative}#ff-drop div#ff-selector{width:130px}#ff-drop div#ff-font-family{width:240px}#ff-selector p{font-size:9px!important;line-height:1.2!important;margin:1em 0 0!important;padding:0!important}#ff-controls{position:absolute!important;bottom:60px;left:65px;width:55px!important;height:60px;margin:0!important;padding:0!important}#ff-controls div{position:absolute;font-size:20px;width:1em;height:1em;color:#555;min-width:inherit!important;min-height:inherit!important;padding:0;margin:0;float:none;text-align:center}#ff-controls>div,.ff-toggler>span,#family-custom-add{font-family:sans-serif!important;font-weight:normal!important;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer}#ff-controls div:hover{color:#000}#ff-controls .up{left:1em;top:0}#ff-controls .down{left:1em;bottom:0}#ff-controls .left{left:0;top:1em}#ff-controls .right{right:-.25em;top:1em}#ff-drop #ff-font-family ul{float:left;width:110px;padding-right:5px}#ff-drop #ff-font-family ul#ff-font-family-sans{padding-right:10px;width:115px}#ff-drop ol li{list-style:none outside}#ff-drop ol,#ff-drop ul{margin:0;padding:0}#ff-drop li{font-size:11px!important; margin:0!important;padding:0!important;list-style:none outside none!important;text-indent:0!important;height:auto!important}#ff-drop li.core{margin-bottom:4px!important;padding:0!important}#ff-drop ul li:hover{cursor:pointer;background-color:#e6e6e6!important}#ff-drop ul li.family-custom{margin:12px 0 0!important}#ff-drop ul li.family-custom:hover{cursor:default;background:none!important}#family-custom-add{display:inline-block;color:#aaa;line-height:1!important;font-size:15px!important;color:#666!important;vertical-align:top;padding:1px 3px 3px}#family-custom-add:hover,#family-custom-add:focus{background-color:#555!important;color:#fff!important}#family-custom{width:85px}#ff-drop ol input[type=radio]{margin-left:-5px;width:auto!important}#ff-blah{width:100px;margin-left:5px}#ff-drop ol label{margin-left:5px;display:inline!important}#ff-drop>#ff-credit{position:absolute;bottom:21px;left:32px;font-size:9px;margin:0!important}#font-friend a{color:#4c0003!important;text-decoration:underline!important;border:0!important}#font-friend a:hover{color:#a60007!important}#ff-drop>#ff-clear{position:absolute;bottom:0;right:0;padding:5px 5px 0!important;text-decoration:line-through;opacity:.1;font-size:21px;margin:0!important;width:auto!important}#ff-clear:hover{opacity:1;cursor:pointer}#ff-font-drop{font-size:11px!important;background-color:#e6e6e6;padding:15px 0;text-align:center;border:1px solid #aaa;margin-bottom:6px}#ff-font-drop.dropzone{background-color:#fff;border-color:#111}#ff-drop select{width:105px!important;margin-left:15px!important}#ff-google-webfonts select{width:99%!important;margin:0!important}#ff-drop select option{font-size:10px!important}#ff-drop .ff-hidden{display:none}#ff-drop .ff-clickable{cursor:pointer;position:relative;z-index:2}#ff-font-family h6 span{text-transform:uppercase!important;font-size:75%;font-weight:normal!important;color:#111!important;letter-spacing:.02em;line-height:1;display:inline-block}#ff-font-family h6 .ff-active{color:#aaa!important}#ff-font-family .ff-custom{padding:0 6px;border-right:1px solid #bbb;margin-right:6px}#ff-badges{position:absolute;right:14px;top:0;z-index:14px}#ff-badges>img{padding:0 4px 0 0!important;margin:0!important;border:0!important;width:16px!important;height:16px!important}#ff-drop #ff-font-family #ff-font-family-custom{width:100%;-webkit-column-count:2;-moz-column-count:2;column-count:2;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px}.ff-toggler{position:absolute;height:20px;top:27px;left:-4px}.ff-toggler span{position:absolute;display:block;left:0;top:0;height:8px;width:8px;line-height:1!important;font-size:8px!important;text-align:center;color:#aaa!important;padding:2px 4px!important}.ff-toggler span:hover{color:#333!important}.ff-toggler span.ff-down{top:auto;bottom:0}#ff-drop [data-ff=fontFamily] li{height:1.5em!important;overflow:hidden;text-overflow:ellipsis}",html:'<div id="ff-drop"><span id="ff-toggle">F<sup>2</sup></span><div id="ff-selector"><h6>Selector</h6><form action="" method="get"><ol><li><input type="radio" name="jq-select" checked="checked" id="jq1"><label for="jq1">body</label></li><li><input type="radio" name="jq-select" id="jq2"><label for="jq2">h1,h2,h3,h4,h5,h6</label></li><li><input type="radio" name="jq-select" id="jq3"><label for="jq3">p</label></li><li><input type="radio" name="jq-select" id="jq4"><input type="text" name="ff-blah" value="roll your own" id="ff-blah"></li></ol></form><p>Roll your own selector using <a href="http://api.jquery.com/category/selectors/">jQuery selectors</a>.</p></div><div id="ff-font-family"><h6>Font Family</h6><div id="ff-badges"></div><ul id="ff-font-family-sans" data-ff="fontFamily"><li>Arial</li><li>Verdana</li><li>Tahoma</li><li class="core">Trebuchet MS</li><li>Helvetica</li><li>Helvetica Neue</li><li>Gill Sans</li><li>Century Gothic</li><li>Lucida Grande</li><li>Lucida Sans Unicode</li><li>Calibri</li><li>Corbel</li><li>Candara</li></ul><ul id="ff-font-family-serif" data-ff="fontFamily"><li>Times New Roman</li><li class="core">Georgia</li><li>Times</li><li>Palatino</li><li>Palatino Linotype</li><li>Baskerville</li><li>Hoefler Text</li><li>Garamond</li><li>Constantia</li><li>Cambria</li><li class="family-custom"><input type="text" name="family-custom" value="your font family" id="family-custom"><span id="family-custom-add">+</span></li></ul></div><div class="wrap"><div id="ff-google-webfonts"><h6>Google Webfonts</h6><div>Loadingâ€¦</div></div><div id="ff-font-size"><h6>Font Size</h6><select data-ff="fontSize"><option>10</option><option>11</option><option>12</option><option>14</option><option>16</option><option>18</option><option>21</option><option>24</option><option>36</option><option>48</option><option>60</option><option>72</option></select></div><div id="ff-font-weight"><h6>Font Weight</h6><select data-ff="fontWeight"><option>100</option><option>200</option><option>300</option><option value="400" selected>400 (normal)</option><option>500</option><option>600</option><option value="700">700 (bold)</option><option>800</option><option>900</option></select></div><div id="ff-line-height"><h6>Line Height</h6><select data-ff="lineHeight"><option>1</option><option>1.1</option><option>1.2</option><option>1.3</option><option>1.4</option><option selected>1.5</option><option>1.6</option><option>1.75</option><option>2</option><option>2.5</option><option>3</option></select></div><div id="ff-font-style"><h6>Font Style</h6><ul data-ff="fontStyle"><li>italic</li><li>normal</li></ul></div></div><div class="wrap"><div id="ff-font-face"><h6>@font-face</h6><div id="ff-font-drop">Drag a font here.</div><ul data-ff="fontFamily"></ul></div><div id="ff-text-transform"><h6>Text Transform</h6><ul data-ff="textTransform"><li>uppercase</li><li>lowercase</li><li>capitalize</li><li>none</li></ul></div><div id="ff-font-variant"><h6>Font Variant</h6><ul data-ff="fontVariant"><li>small-caps</li><li>normal</li></ul></div></div><div id="ff-controls"><div class="left">&larr;</div><div class="right">&rarr;</div><div class="up">&uarr;</div><div class="down">&darr;</div></div><div id="ff-credit"><a href="http://somadesign.ca/projects/fontfriend/" title="Soma FontFriend homepage">Soma FontFriend</a></div><div id="ff-clear" title="clear all styles">S</div></div>',customFamiles:false,customFamilyMap:[],googleFamilies:[]};
function a(){if(typeof(A.jQuery)===n){var L=f.createElement("script");L.src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js";f.getElementsByTagName("head")[0].appendChild(L);x=setInterval(F,100)}else{J()}}a();function F(){if(typeof(A.jQuery)!==n){clearInterval(x);J()}}function J(){r=A.jQuery;if(r("#font-friend").size()!==0){return false}m=r("body");r("head").append('<style id="font-friend-stylesheet" type="text/css" media="screen">'+y.css+"</style>");m.append("<div id='font-friend'></div>");r("#font-friend").html(y.html).addClass("open");r("#ff-credit").append("<span> "+y.version+"</span>");k();l();j();I();s();K();G()}function G(){var L=[];r.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22http%3A%2F%2Fwww.google.com%2Fwebfonts%3Fsort%3Dalpha%22%20and%20xpath%3D%22%2Fhtml%2Fbody%2Ful%5B3%5D%22&format=json",function(M){r.each(M.query.results.ul.li,function(N,O){L.push(O.div.div[2].span)});w(L)})}function w(M){var L=['<option value="0">Choose:</option>'],M;r.each(M,function(O,N){L.push("<option value='"+N.replace(/ /g,"+")+"'>"+N+"</option>")});M=r("<select>"+L.join("")+"</select>");M.change(i);r("#ff-google-webfonts > div").html(M)}function i(){var L=r(this),Q=L.val(),N=Q.replace(/\+/g," "),O="http://fonts.googleapis.com/css?family=",P=":100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",M=O+Q+P;if(Q==="0"){return}if(r.inArray(N,y.googleFamilies)===-1){r('<link rel="stylesheet" type="text/css" href="'+M+'" >').appendTo("head");z([N],"www.google.com");r("#ff-font-family-custom").find("li:last").click();y.googleFamilies.push(N)}}function K(){E();t();D();C()}function E(){var L=f.styleSheets||[],M=[];r.each(L,function(N,P){try{r.each(P.cssRules,function(R,S){if(S.type==CSSRule.FONT_FACE_RULE){var Q=S.style.getPropertyValue("font-family");if(Q){Q=Q.replace(/^"|'/,"").replace(/"|'$/,"");if(Q!=="testfont"){M.push(Q)}}}})}catch(O){}});if(M.length>0){z(d(M))}}function l(){if(typeof(fontFriendFamilies)!==n){y.customFamilies=fontFriendFamilies;if(!r.isArray(y.customFamilies)){var L=[];r.each(y.customFamilies,function(M,N){L.push(M)});y.customFamilies=L;y.customFamilyMap=fontFriendFamilies}}else{if(m.attr("data-ff-families")){y.customFamilies=m.attr("data-ff-families").split(",")}}}function s(){y.wfs=(A.location.href=="http://webfontspecimen.com/demo/");y.wfsName=(y.wfs)?r("h1, .bodysize tr:first-child th:first-child"):false;if(!y.wfs&&r("body").attr("id")=="soma-web-font-specimen"){y.wfs=true;y.wfsName=r("h1, .bodysize tr:first-child th.base")}if(y.wfs){y.wfsOriginalName=r("h1").text();y.wfsTitle=r("title").text()}}function j(){r("#font-friend").find("select").each(function(L){var M=r('<span class="ff-toggler"><span class="ff-up" title="Increase">&#9650;</span><span class="ff-down" title="Decrease">&#9660;</span></span>');M.insertBefore(this)});r(".ff-toggler span").click(o)}function o(M){var L=r(this),Q=M.target.className=="ff-up",P=L.parent().next(),N=P.find(":selected"),O;O=(Q)?N.next():N.prev();if(O.size()==0){O=(Q)?P.find(":first"):P.find(":last")}O.attr("selected","selected");P.trigger("change")}function C(){var L=p(),M;if(!L){return}r.getJSON("http://www.typotheque.com/ajax/webfont_api.php?key="+L,function(N){console.log(N)})}function p(){var L=false;r('link[href*="wf.typotheque.com"]').each(function(){L=r(this).attr("href").split("/").pop();return false});return L}function D(){var L=b(),N,M=[];if(!L){return}N=L.split("family=").pop();r.each(N.split("|"),function(P,O){M.push(O.split(":")[0].replace("+"," "))});if(M.length>0){z(M,"www.google.com");y.googleFamilies=M}}function b(){var L=false;r('link[href*="fonts.googleapis.com"]').each(function(){L=r(this).attr("href");return false});return L}function H(){var L=null;r("script").each(function(N){var M=this.src.match(/use\.typekit\.com\/(.+)\.js/);if(M){L=M[1];return false}});return L}function t(){var L=H();if(!L){return false}r.getJSON("https://typekit.com/api/v1/json/kits/"+L+"/published?callback=?",function(M){if(!M.errors){var N=[];
r.each(M.kit.families,function(O,P){y.customFamilyMap[P.name]=P.css_names.join(",");N.push(P.name)});z(N,"typekit.com")}})}function c(L){var O="//"+L+"/favicon.ico",M=r("#ff-badges"),N=M.find("[src='"+O+"']");if(!N.length){r("<img />",{src:O}).appendTo(M)}}function z(R,M){var L=r("#ff-font-family-custom"),P=r('<ul id="ff-font-family-custom" data-ff="fontFamily" class="ff-hidden"></ul>'),O="",N="Click to toggle between custom & stock font families",Q=': <span class="ff-custom ff-active">Custom</span><span class="ff-stock">Stock</span>';r.each(R,function(S,T){O+="<li>"+T+"</li>"});if(typeof(M)!==n){c(M)}if(L.size()===1){L.append(O);return I()}O=P.append(O);r("#ff-font-family").append(O);r("#ff-font-family > h6").addClass("ff-clickable").attr("title",N).append(Q).click(function(){var T=r(this),W=T.hasClass("ff-custom")?true:false,Z=r("#ff-font-family-custom"),V=r("#ff-font-family-sans, #ff-font-family-serif"),W=!Z.is(":visible"),X=T.children(),Y=100,U,S;if(W){U=V;S=Z}else{U=Z;S=V}X.toggleClass("ff-active");U.fadeOut(Y,function(){S.fadeIn(Y)})});I();r("#ff-font-family > h6").click()}if(y.customFamilies){z(y.customFamilies)}function B(L){if(!y.wfs){return false}if(!L){y.wfsName.text(y.wfsOriginalName);r("title").text(y.wfsTitle)}else{y.wfsName.text(L);r("title").text(y.wfsTitle.replace("Font name",L))}}function h(L){if(typeof(y.customFamilyMap[L])!==n){L=y.customFamilyMap[L]}return L+",monospace"}function I(){r("#ff-font-family li, #ff-font-face li").each(function(){var L=r(this);L.css("fontFamily",h(L.text()))});r("#ff-font-style li, #ff-text-transform li, #ff-font-variant li").each(function(){var M=r(this),L=M.parent().data("ff"),N=M.text();M.css(L,N)})}function q(N,M){var L=new FileReader();L.name=M;L.onloadend=function(O){u(O)};L.readAsDataURL(N)}function v(L){return L.replace(/\..+$/,"").replace(/\W+/,"-").replace(/-|_/," ").replace(/^([a-z])|\s+([a-z])/g,function(M){return M.toUpperCase()})}function g(L){var N=L.originalEvent.dataTransfer,M=N.files,S=M.length,O=/^.*\.(ttf|otf|woff)$/i;e(L);for(var R=0;R<S;R++){var P=M[R],Q=P.name,T;if(Q.match(O)){T=v(Q);q(P,T)}else{alert("Invalid file extension. Will only accept ttf, otf, or woff font files")}}}function u(M){var L=M.target.name,N=M.target.result;var O=N.split("base64");if(O[0].indexOf("application/octet-stream")==-1){O[0]="data:application/octet-stream;base64";N=O[0]+O[1]}r("<style type='text/css'>@font-face{font-family: "+L+"; src:url("+N+");}</style> ").appendTo("head");z([L]);r("#ff-font-family-custom").find("li:last").click()}function e(L){L.stopPropagation();L.preventDefault()}function d(P){var L=P.length,O={},N=[],M;for(M=0;M<L;M+=1){O[P[M]]=P[M]}for(M in O){N.push(O[M])}return N}function k(){var L=r("#font-friend");y.width=L.outerWidth();y.height=L.outerHeight();r("#ff-toggle").toggle(function(){L.removeClass("open").animate({height:16,width:16},100)},function(){L.addClass("open").animate({height:y.height,width:y.width},100)});r("#ff-drop ul > li").live("click",function(){if(r(this).children("input").length){return false}var M=r(this),O=M.parent().attr("data-ff"),P=M.text(),N=r("#ff-drop ol input:checked").next().text();if(N==""){N=r("#ff-drop ol input:checked").next().attr("value")}if(O=="fontFamily"){B(P);P=h(P)}r(N).css(O,P)});r("#ff-drop select").change(function(){var N=r(this).attr("data-ff"),O=parseFloat(r(this).find("option:selected").val()),M=r("#ff-drop ol input:checked").next().text();if(M==""){M=r("#ff-drop ol input:checked").next().attr("value")}r(M).css(N,O)});r("#ff-drop li.family-custom").unbind();r("#family-custom").keyup(function(N){var O=r("#family-custom").attr("value"),M=r("#ff-drop ol input:checked").next().text();if(M==""){M=r("#ff-drop ol input:checked").next().attr("value")}if(N.keyCode==13){r("#family-custom-add").click()}else{r(M).css("fontFamily",O);B(O)}e(N)});r("#ff-controls div").click(function(){if(r(this).hasClass("left")){r("#font-friend").css({left:30,right:"auto"})}if(r(this).hasClass("right")){r("#font-friend").css({right:30,left:"auto"})
}if(r(this).hasClass("up")){r("#font-friend").css({top:0,bottom:"auto"})}if(r(this).hasClass("down")){r("#font-friend").css({bottom:0,top:"auto"})}});r("#ff-blah, #family-custom").each(function(M){r(this).attr("data-ff",r(this).attr("value"))}).click(function(){r(this).prev().attr("checked","checked");if(r(this).attr("value")==r(this).attr("data-ff")){r(this).removeAttr("value")}else{r(this).select()}});r("#ff-clear").click(function(){r("*").not("[data-ff=fontFamily]").removeAttr("style");I();B()});r("#family-custom-add").click(function(){var M=r(this).prev(),N=M.val();if(N!=="your font family"&&N!==""){z([N]);M.val("").select()}});r("#ff-font-drop").bind("dragover",e).bind("dragenter dragleave",function(M){r(this).toggleClass("dropzone");e(M)}).bind("drop",g)}}(this,this.document));